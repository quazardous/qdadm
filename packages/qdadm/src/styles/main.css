/* Framework Design System */
@import './theme/index.css';

/* Modular CSS imports */
@import './_alerts.css';
@import './_code.css';
@import './_dialogs.css';
@import './_markdown.css';
@import './_show-pages.css';

/* Base styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body, #app {
  height: 100%;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
}

/* Global placeholder styling - light blue-gray for better visibility */
input::placeholder,
textarea::placeholder,
.p-inputtext::placeholder,
.p-autocomplete-input::placeholder,
.p-textarea::placeholder,
.p-select-label.p-placeholder,
.p-dropdown-label.p-placeholder {
  color: #a0aec0 !important;
  opacity: 1;
}

/* Layout - AppLayout styles are now scoped in AppLayout.vue */
/* Only keep truly global layout utilities here */

.page-content {
  flex: 1;
  padding: 1.5rem;
  overflow-y: auto;
}

/* Cards */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.stat-card {
  background: var(--p-surface-0);
  border-radius: 0.5rem;
  padding: 1.5rem;
  border: 1px solid var(--p-surface-200);
}

.stat-card-title {
  font-size: 0.875rem;
  color: var(--p-surface-500);
  margin-bottom: 0.5rem;
}

.stat-card-value {
  font-size: 2rem;
  font-weight: 600;
  color: var(--p-surface-900);
}

.stat-card-subtitle {
  font-size: 0.75rem;
  color: var(--p-surface-400);
  margin-top: 0.25rem;
}

/* Page headers */
.page-header {
  margin-bottom: 1.5rem;
}

.page-title {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--p-surface-900);
}

.header-actions {
  display: flex;
  gap: 0.75rem;
  align-items: center;
}

/* Forms */
.form-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1.5rem;
  padding: 1rem 0;
}

.form-field {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

/* Spacing between form sections (not within grids - gap handles that) */
.form-row + .form-field,
.form-field + .form-row {
  margin-top: 1.25rem;
}

.form-field label {
  font-weight: 500;
  color: var(--p-surface-700);
}

.form-field small {
  color: var(--p-surface-500);
  font-size: 0.85rem;
}

/* Form rows - grid layouts */
.form-row {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1.5rem;
  align-items: end;
}

.form-row-3 {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1rem;
  align-items: end;
}

.form-row.metadata {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
  padding: 1rem;
  background: var(--p-surface-50);
  border-radius: 0.5rem;
  align-items: end;
}

.form-row.checkboxes {
  display: flex;
  gap: 3rem;
}

/* Meta items in forms */
.meta-item {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.meta-item label {
  font-size: 0.85rem;
  color: var(--p-surface-500);
}

.meta-item span {
  font-weight: 500;
}

/* Toggle/checkbox fields */
.toggle-field {
  flex-direction: row;
  align-items: center;
  gap: 1rem;
}

.toggle-field label {
  min-width: 120px;
}

/* Field with inline button (url, lock, envelope) */
.url-field,
.lock-field,
.envelope-field {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

.url-field input,
.lock-field input,
.envelope-field input {
  flex: 1;
}

/* Field hint - small helper text below inputs */
.field-hint,
.form-hint {
  font-size: 0.8rem;
  color: var(--p-surface-400);
  margin-top: 0.25rem;
  display: block;
}

/* Field error - validation error text */
.field-error {
  font-size: 0.8rem;
  color: var(--p-red-500);
  margin-top: 0.25rem;
  display: block;
}

/* Editor box - container for complex editors (permissions, scopes, etc.) */
.editor-box {
  border: 1px solid var(--p-surface-200);
  border-radius: 0.5rem;
  padding: 0.75rem;
  background: var(--p-surface-50);
}

/* Chips container with separator */
.editor-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
  padding-bottom: 0.75rem;
  border-bottom: 1px solid var(--p-surface-200);
}

/* Chip typography for code-like content */
.chip-code {
  font-family: monospace;
  font-size: 0.875rem;
}

.chip-namespace {
  color: var(--p-surface-500);
}

.chip-action {
  color: var(--p-primary-600);
  font-weight: 500;
}

.chip-wildcard {
  color: var(--p-orange-500);
  font-weight: 700;
}

/* Info grid for readonly data */
.info-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
}

.info-grid > div {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.info-grid label {
  font-size: 0.85rem;
  color: var(--p-surface-500);
}

/* Info item */
.info-item {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.info-item label {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--p-surface-500);
  text-transform: uppercase;
}

.info-value {
  font-size: 0.9rem;
}

/* Timestamps grid */
.timestamps-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
}

.timestamps-grid--separator {
  padding-top: 1rem;
  border-top: 1px solid var(--p-surface-200);
}

.timestamp {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.timestamp label {
  font-size: 0.75rem;
  color: var(--text-color-secondary);
  text-transform: uppercase;
}

/* Loading/busy states */
.loading-state {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 3rem;
}

.loading-state--inline {
  padding: 1rem;
  gap: 0.75rem;
  color: var(--p-text-muted-color);
}

/* Empty state (no content) */
.empty-state {
  padding: 2rem;
  text-align: center;
  color: var(--p-text-muted-color);
}

/* Error message display */
.error-message {
  background: var(--p-red-50);
  border: 1px solid var(--p-red-200);
  border-radius: 0.375rem;
  padding: 0.75rem 1rem;
  color: var(--p-red-700);
  font-family: var(--p-font-family-mono, monospace);
  font-size: 0.85rem;
  white-space: pre-wrap;
  word-break: break-word;
}

/* Error content in cards/panels */
.error-content {
  background: var(--p-red-50);
  color: var(--p-red-700);
  padding: 1rem;
  border-radius: 0.5rem;
  overflow-x: auto;
  margin: 0;
  font-size: 0.85rem;
  white-space: pre-wrap;
}

:root[data-theme='dark'] .error-message,
:root[data-theme='dark'] .error-content {
  background: rgba(239, 68, 68, 0.1);
  color: var(--p-red-400);
  border-color: var(--p-red-900);
}

/* Login page styles are now scoped in Login.vue */
/* User info styles are now scoped in AppLayout.vue */

/* Table actions */
.table-actions {
  display: flex;
  gap: 0.25rem;
  justify-content: flex-start;
}

/* ===========================================
   List Page Common Styles
   =========================================== */

/* Text utilities */
.text-muted {
  color: var(--p-surface-400);
}

/* Status/Type tags container */
.status-tags,
.type-tags {
  display: flex;
  gap: 0.25rem;
  flex-wrap: wrap;
}

/* External link style (domains, urls) */
.external-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--p-primary-500);
  text-decoration: none;
}

.external-link:hover {
  text-decoration: underline;
}

.external-link i {
  font-size: 0.75rem;
  opacity: 0.6;
}

/* Domain cell (for domain lists) */
.domain-cell {
  display: flex;
  align-items: center;
}

.domain-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--p-primary-500);
  text-decoration: none;
}

.domain-link:hover {
  text-decoration: underline;
}

.domain-link i {
  font-size: 0.75rem;
  opacity: 0.6;
}

/* Domain tags in event list */
.domain-tags {
  display: flex;
  gap: 0.25rem;
}

/* Clickable table cell text */
.clickable-cell {
  cursor: pointer;
  color: var(--p-primary-color);
}

.clickable-cell:hover {
  text-decoration: underline;
}

/* Entity links (for references to jobs, batches, stories, etc.) */
.entity-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  text-decoration: none;
  color: var(--p-primary-color);
}

.entity-link:hover {
  text-decoration: underline;
}

.entity-type {
  font-weight: 500;
}

.entity-id {
  font-size: 0.75rem;
  background: var(--p-surface-100);
  padding: 0.15rem 0.35rem;
  border-radius: 3px;
}

/* Interests/tags display (limited with +N) */
.tags-preview {
  display: flex;
  gap: 0.25rem;
  flex-wrap: wrap;
}

.tags-preview .p-tag {
  font-size: 0.75rem;
}

/* Filter bar */
.filter-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
}

/* Highlight active filters with orange border */
.p-select.filter-active,
.p-inputtext.filter-active {
  border-color: #f97316 !important;
  box-shadow: 0 0 0 1px #f97316 !important;
}

/* Modified form fields - orange border */
/* Applied via FormField wrapper component */
.form-field.field-dirty .p-inputtext,
.form-field.field-dirty .p-select,
.form-field.field-dirty .p-textarea,
.form-field.field-dirty .p-password input,
.form-field.field-dirty .p-multiselect,
.form-field.field-dirty .p-calendar input,
.form-field.field-dirty .p-inputnumber input,
.form-field.field-dirty .p-dropdown {
  border-color: #f97316 !important;
  box-shadow: 0 0 0 1px #f97316 !important;
}

/* Note: Checkbox and toggle switch dirty styling removed
   because it highlights ALL items in a group when any changes.
   The "unsaved changes" banner is sufficient feedback. */

.filter-bar-left {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.filter-bar-right {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

/* Checkbox field layout */
.checkbox-field {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.checkbox-field label {
  margin: 0;
  cursor: pointer;
}

/* Utility class for full width */
.w-full {
  width: 100% !important;
}

/* Force PrimeVue inputs to be full width */
.form-field .p-inputtext,
.form-field .p-textarea,
.form-field .p-select,
.form-field .p-multiselect,
.form-field .p-inputwrapper,
.form-field input,
.form-field textarea {
  width: 100% !important;
  box-sizing: border-box;
}

/* Fix textarea height */
.form-field .p-textarea,
.form-field textarea {
  min-height: 100px;
  resize: vertical;
}

/* Dirty state indicator for forms */
.form-dirty-indicator {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: color-mix(in srgb, var(--p-orange-100) 50%, transparent);
  border: 1px solid var(--p-orange-300);
  border-radius: 0.375rem;
  color: var(--p-orange-700);
  font-size: 0.875rem;
  margin-bottom: 1rem;
}

.form-dirty-indicator i {
  color: var(--p-orange-500);
}

/* PrimeVue Tabs - add padding to tab panels */
.p-tabpanels {
  padding-top: 1rem;
}

/* First form element in tab panel needs top margin */
.p-tabpanel > .form-field:first-child,
.p-tabpanel > .form-row:first-child,
.p-tabpanel > .form-grid:first-child {
  margin-top: 0.5rem;
}

/* ===========================================
   Utility Classes
   =========================================== */

/* Spinners */
.spinner-lg {
  font-size: 2rem;
}

.spinner-md {
  font-size: 1.5rem;
}

/* Cards */
.card {
  background: var(--p-surface-0);
  border-radius: 0.5rem;
  padding: 1.5rem;
  border: 1px solid var(--p-surface-200);
}

.form-card {
  background: var(--p-surface-0);
  padding: 2rem;
  border-radius: 0.5rem;
}

.info-card {
  background: var(--p-surface-50);
  padding: 1rem;
  border-radius: 0.5rem;
}

/* Card title patterns */
.card-title {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.card h3,
.card-heading {
  margin: 0 0 1rem;
  font-size: 1rem;
  font-weight: 600;
  color: var(--p-surface-700);
}

.warning-card {
  background: var(--p-yellow-50);
  padding: 1rem;
  border-radius: 0.5rem;
  border: 1px solid var(--p-yellow-200);
}

.warning-card i {
  color: var(--p-yellow-600);
}

.warning-card span {
  margin-left: 0.5rem;
  color: var(--p-yellow-700);
}

/* Grid utilities */
.span-full {
  grid-column: 1 / -1;
}

/* Text utilities */
.text-muted {
  color: var(--p-surface-500);
}

.text-uppercase {
  text-transform: uppercase;
}

.text-center {
  text-align: center;
}

.monospace {
  font-family: monospace;
}

.break-all {
  word-break: break-all;
}

/* Spacing */
.mb-0 { margin-bottom: 0; }
.mb-1 { margin-bottom: 0.5rem; }
.mb-2 { margin-bottom: 1rem; }
.mb-3 { margin-bottom: 1.5rem; }
.mt-0 { margin-top: 0; }
.mt-1 { margin-top: 0.5rem; }
.mt-2 { margin-top: 1rem; }
.p-2 { padding: 1rem; }
.p-3 { padding: 1.5rem; }
.pt-2 { padding-top: 1rem; }
.gap-1 { gap: 0.5rem; }
.gap-2 { gap: 1rem; }
.gap-3 { gap: 1.5rem; }

/* Flexbox utilities */
.flex { display: flex; }
.flex-col { flex-direction: column; }
.flex-wrap { flex-wrap: wrap; }
.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.items-end { align-items: flex-end; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.flex-1 { flex: 1; }

/* Grid utilities */
.grid { display: grid; }
.grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
.grid-cols-3 { grid-template-columns: repeat(3, 1fr); }

/* Display info blocks (for show pages) */
.info-block {
  background: var(--p-surface-50);
  padding: 1.5rem;
  border-radius: 0.5rem;
}

.info-block-title {
  margin: 0 0 1rem 0;
  font-size: 1rem;
  color: var(--p-surface-600);
}

.info-block-title i {
  margin-right: 0.5rem;
}

.info-label {
  font-weight: 500;
  color: var(--p-surface-500);
  display: block;
  margin-bottom: 0.25rem;
}

.info-label-sm {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--p-surface-500);
  text-transform: uppercase;
  display: block;
  margin-bottom: 0.25rem;
}

.value-lg {
  font-size: 1.5rem;
  font-weight: 600;
}

/* Accent blocks */
.accent-block {
  background: var(--p-surface-50);
  border-left: 3px solid var(--p-primary-500);
  padding: 1rem;
  border-radius: 0.25rem;
}

/* Code/key display */
.code-block {
  word-break: break-all;
  font-family: monospace;
  background: var(--p-surface-100);
  padding: 1rem;
  border-radius: 0.25rem;
}

/* Empty state styling */
.empty-state-icon {
  font-size: 3rem;
  color: var(--p-text-muted-color);
}

/* ===========================================
   Section Headers
   =========================================== */

.section-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.section-header h3 {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
}

.section-header i {
  color: var(--p-primary-500);
}

.section-description {
  color: var(--p-surface-500);
  font-size: 0.875rem;
  margin-bottom: 1rem;
}

.section-title {
  margin: 0 0 1rem 0;
  font-size: 1rem;
  font-weight: 600;
  color: var(--p-surface-700);
}

.section-title--separator {
  border-top: 1px solid var(--p-surface-200);
  padding-top: 1.5rem;
}

.section-title i {
  margin-right: 0.5rem;
}

/* ===========================================
   Config Pages Pattern
   =========================================== */

.config-intro {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  padding: 1rem;
  background: var(--p-surface-50);
  border-radius: 0.5rem;
  margin-bottom: 1.5rem;
}

.config-intro i {
  font-size: 1.25rem;
  color: var(--p-primary-500);
  margin-top: 0.125rem;
}

.config-field {
  margin-bottom: 1.5rem;
}

/* ===========================================
   Image Gallery Pattern
   =========================================== */

.image-gallery {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1rem;
}

.image-card {
  position: relative;
  border-radius: 0.5rem;
  overflow: hidden;
  border: 1px solid var(--p-surface-200);
}

.image-card img {
  width: 100%;
  aspect-ratio: 16/9;
  object-fit: cover;
}

.image-card--clickable {
  cursor: pointer;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.image-card--clickable:hover {
  border-color: var(--p-primary-300);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.image-caption {
  padding: 0.5rem;
  background: var(--p-surface-50);
  font-size: 0.75rem;
  color: var(--p-surface-600);
}

/* ===========================================
   Info Row Pattern (for key-value pairs)
   =========================================== */

.info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0;
  border-bottom: 1px solid var(--p-surface-100);
}

.info-row:last-child {
  border-bottom: none;
}

/* ===========================================
   Breadcrumb (AppLayout auto-generated)
   =========================================== */

.layout-breadcrumb {
  padding: 0.75rem 1.5rem;
  background: var(--p-surface-0, white);
  border-bottom: 1px solid var(--p-surface-200, #e2e8f0);
}

.layout-breadcrumb .p-breadcrumb-list {
  margin: 0;
  padding: 0;
}

.breadcrumb-link {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  color: var(--p-primary-600, #2563eb);
  text-decoration: none;
  font-size: 0.875rem;
}

.breadcrumb-link:hover {
  text-decoration: underline;
}

.breadcrumb-link i {
  font-size: 0.875rem;
}

.breadcrumb-current {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  color: var(--p-surface-600, #475569);
  font-size: 0.875rem;
}

.breadcrumb-current i {
  font-size: 0.875rem;
}

/* Responsive - Sidebar mobile styles are now in AppLayout.vue */
@media (max-width: 768px) {
  .form-grid {
    grid-template-columns: 1fr;
  }
}
